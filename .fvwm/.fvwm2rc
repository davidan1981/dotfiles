#  ________________________________________________________________ 
# | _ |                    David's FVWM                    | _ | _ |
# |___|____________________________________________________|___|___|
# |                                                                |
# |                                                                |
# |  ________  ________  ___      ___ ___  ________  ________      |
# | |\   ___ \|\   __  \|\  \    /  /|\  \|\   ___ \|\   ____\     |
# | \ \  \_|\ \ \  \|\  \ \  \  /  / | \  \ \  \_|\ \ \  \___|_    |
# |  \ \  \ \\ \ \   __  \ \  \/  / / \ \  \ \  \ \\ \ \_____  \   |
# |   \ \  \_\\ \ \  \ \  \ \    / /   \ \  \ \  \_\\ \|____|\  \  |
# |    \ \_______\ \__\ \__\ \__/ /     \ \__\ \_______\____\_\  \ |
# |     \|_______|\|__|\|__|\|__|/       \|__|\|_______|\_________\|
# |                                                    \|_________||
# |                                                                |
# |  ________ ___      ___ ___       __   _____ ______             |
# | |\  _____\\  \    /  /|\  \     |\  \|\   _ \  _   \           |
# | \ \  \__/\ \  \  /  / | \  \    \ \  \ \  \\\__\ \  \          |
# |  \ \   __\\ \  \/  / / \ \  \  __\ \  \ \  \\|__| \  \         |
# |   \ \  \_| \ \    / /   \ \  \|\__\_\  \ \  \    \ \  \        |
# |    \ \__\   \ \__/ /     \ \____________\ \__\    \ \__\       |
# |     \|__|    \|__|/       \|____________|\|__|     \|__|       |
# |                                                                |
# |                                                                |
# |________________________________________________________________|
#

###############################
# Set environment variables
###############################
SetEnv fvwm_imgs $[FVWM_USERDIR]/images
SetEnv fvwm_icons $[FVWM_USERDIR]/icons
SetEnv fvwm_48_icons /usr/share/icons/hicolor/48x48/apps
SetEnv fvwm_32_icons /usr/share/icons/hicolor/32x32/apps
SetEnv fvwm_pixmaps /usr/share/pixmaps/fvwm
SetEnv fvwm_script $./scripts
SetEnv fvwm_wallpapers $[FVWM_USERDIR]/wallpapers
SetEnv fvwm_webbrowser /usr/bin/chromium-browswer
SetEnv fvwm_term /usr/bin/urxvt
SetEnv fvwm_hilight #4169E1
SetEnv fvwm_back azure4
SetEnv fvwm_window_font -*-fixed-*-*-*-*-*-*-*-*-*-80-*-*
SetEnv fvwm_menu_font -*-fixed-medium-r-*-*-*-*-*-*-*-80-*-*

#########
# Paths
#########
ImagePath $[fvwm_icons]:$[fvwm_icons];.png:$[fvwm_icons];.jpg:$[fvwm_imgs]:$[fvwm_wallpapers]:$[fvwm_48_icons]:$[fvwm_32_icons]:$[fvwm_pixmaps]

#################
# Default fonts
#################
WindowFont       $[fvwm_window_font]

##############################
# Global styles and options
##############################
HilightColor white  $[fvwm_hilight]
Emulate Mwm
MenuStyle Mwm
MenuStyle * PopupOffset 0 100
MenuStyle * Font $[fvwm_menu_font]
SnapGrid 3 3
Style "*"           MWMFunctions, MwmBorder, MwmButtons, MwmDecor
Style "*"           DecorateTransient, NoPPosition
Style "*"           FocusFollowsMouse, MouseFocusClickRaises
Style "*"           ActivePlacement, RandomPlacement
Style "*"           IconBox +100 +15 -15 -15, IconFill top left
Style "Fvwm*"       NoTitle,  Sticky, WindowListSkip
Style "Fvwm*"       CirculateSkipIcon, CirculateSkip
Style "FvwmPager"   NoTitle, Sticky, WindowListSkip
Style "FvwmButtons" NoTitle, Sticky, WindowListSkip
Style "FvwmButtons" CirculateSkip
Style "FvwmButtons" ClickToFocus, BorderWidth 0, HandleWidth 0
Style "*clock"      NoTitle, NoHandles, Sticky, WindowListSkip
Style "xbiff"       NoTitle, Sticky, WindowListSkip
Style "xbuffy"      NoTitle, Sticky
Style "xcalc"       RandomPlacement
Style "xman"        RandomPlacement
Style "xterm"       Icon xterm.xpm
Style "urxvt"       Icon term.xpm

##############################
# Initialization and restart
##############################
AddToFunc InitFunction    
+       "I" Exec exec xscreensaver -no-splash
+       "I" Module FvwmButtons
+       "I" BuildWallPaperMenu
+       "I" InitWallpaper

AddToFunc RestartFunction 
+       "I" Module FvwmButtons
+       "I" BuildWallPaperMenu

###################################################
# Desktop settings, keys, and pagers
###################################################
DeskTopSize 4x2
EdgeResistance 150 150
EdgeScroll 100 100
EdgeThickness 1
Key Left     A        SC       FuncMoveWindowToPage -1p +0p
Key Right    A        SC       FuncMoveWindowToPage +1p +0p
Key Up       A        SC       FuncMoveWindowToPage +0p -1p
Key Down     A        SC       FuncMoveWindowToPage +0p +1p
Key Left     A        C        FuncGotoPage -1p +0p
Key Right    A        C        FuncGotoPage +1p +0p
Key Up       A        C        FuncGotoPage +0p -1p
Key Down     A        C        FuncGotoPage +0p +1p

DestroyFunc FuncMoveWindowToPage
AddToFunc   FuncMoveWindowToPage
+ I MoveToPage $0 $1
+ I GotoPage $0 $1

DestroyFunc FuncGotoPage
AddToFunc   FuncGotoPage
+ I GotoPage $0 $1
+ I Next (CurrentPage, !Iconic, !Sticky, !Shaded, !Focused, !Overlapped) FuncSelectWindow

DestroyFunc FuncSelectWindow
AddToFunc   FuncSelectWindow
+ I Iconify off
+ I Focus
+ I Raise

#########
# Pager
#########
*FvwmPagerBack $[fvwm_back]
*FvwmPagerRows 1
*FvwmPagerFont none
*FvwmPagerSmallFont 5x8

#############
# Wallpaper
#############
DestroyFunc BuildWallPaperMenu
AddToFunc   BuildWallPaperMenu
+ I Exec rm $[fvwm_icons]/wallpapers/*
+ I PipeRead 'for i in $[fvwm_wallpapers]/*.png; \
  do convert -scale 64 $i \
  "$[fvwm_icons]/wallpapers/`basename $i`"; done && echo Nop'
+ I Exec rm $[FVWM_USERDIR]/WallpaperMenu
+ I Exec echo "DestroyMenu FvwmWallpaperMenu" > \
  $[FVWM_USERDIR]/WallpaperMenu
+ I Exec echo "AddToMenu FvwmWallpaperMenu \"Wallpapers\" Title" >> \
  $[FVWM_USERDIR]/WallpaperMenu
+ I PipeRead 'for i in $[fvwm_wallpapers]/*.png; \
  do echo "AddToMenu FvwmWallpaperMenu \
  \"`basename $i`%$[fvwm_icons]/wallpapers/`basename $i`%\" \
  FvwmChangeBackground \"`basename $i`\"" \
  >> $[FVWM_USERDIR]/WallpaperMenu; done && echo Nop'
+ I Read $[FVWM_USERDIR]/WallpaperMenu

DestroyFunc FvwmChangeBackground
AddToFunc   FvwmChangeBackground
+ I Exec exec feh --bg-fill $[fvwm_wallpapers]/$0
+ I Exec echo "feh --bg-fill \
  $[fvwm_wallpapers]/$0" > $[FVWM_USERDIR]/cfg/background.cfg

DestroyFunc InitWallpaper
AddToFunc   InitWallpaper
+ I Exec source $[FVWM_USERDIR]/cfg/background.cfg

#########
# Menu
#########
ClickTime 750
ColormapFocus FollowsMouse
# main pop-up menus
Mouse 1  R      A        Menu Fvwm2-Actions Nop
Mouse 2  R      A        Menu Other-Logins Nop
Mouse 3  R      A        Menu ApplicationMenu Nop
# title bar buttons
Mouse 0  1      A        Menu Window-Ops Nop
Mouse 0  2      A        Maximize-Func
Mouse 0  4      A        Iconify
# for when you click the edge of a window
Mouse 1  FS     A        Resize-or-Raise
Mouse 1  T      A        Move-or-Raise
Mouse 1  I      A        Move-or-Iconify
Mouse 2  I      A        Iconify
Mouse 2  FST    A        Menu Window-Ops Nop
Mouse 3  TSIF   A        RaiseLower
# raise or lower window with alt-mousebutton1
Mouse 1  W      M        Move-or-Raise

DestroyMenu Fvwm2-Actions
AddToMenu Fvwm2-Actions  "Fvwm2 Actions"  Title   
+ "Refresh%mini.refresh.xpm%"  Exec  exec xrefresh &
+ "Move%mini.move.xpm%"        Move-or-Raise2
+ "Destroy%mini.destroy.xpm%"  Destroy
+ "Delete%mini.delete.xpm%"    Delete   
+ ""    Nop
+ "Active Windows%mini.windows.xpm%" WindowList
+ ""    Nop
+ "Restart%mini.fvwm.xpm%"     Restart /usr/local/bin/fvwm2
+ ""    Nop
+ "Quit%mini.exit.xpm%"        Popup ConfirmQuit

DestroyMenu ConfirmQuit
AddToMenu ConfirmQuit "Really Quit?" Title
+ "No%mini.stop.xpm%"          Nop
+ "Yes%mini.exit.xpm%"         Quit

DestroyMenu ApplicationMenu
AddToMenu ApplicationMenu  "Application Menu"  Title      
+ "Internet%mini.nscape.xpm%"        Popup Internet
+ "Productivity%mini.chart.xpm%"     Popup Productivity
+ "Development%mini.hammer.xpm%"     Popup Development
+ "Graphics%mini.paint2.xpm%"        Popup Graphics
+ "Games%mini.xboing.xpm%"           Popup Games
+ "X Utilities%mini.x.xpm%"          Popup XUtilities
+ ""    Nop
+ "Settings%mini.rainbow.xpm%"       Popup Settings
+ ""    Nop
+ "Power%mini.crosbone.xpm%"         Popup Power

DestroyMenu Games
AddToMenu Games "Games" Title
+ "Steam"         Exec exec /usr/bin/steam &
+ "Mahjongg"      Exec exec /usr/games/gnome-mahjongg &
+ "OpenTTD"       Exec exec /usr/games/openttd &

DestroyMenu Settings
AddToMenu Settings "Settings" Title
+ "Unity Settings%mini.gnome.xpm%"   Exec  exec /usr/bin/unity-control-center &
+ "Build Wallpapers"                 BuildWallPaperMenu
+ "Select Wallpaper"                 Popup FvwmWallpaperMenu

DestroyMenu Power
AddToMenu Power "Power" Title
+ "Suspend%mini.monitor.xpm%"  Exec exec gksudo pm-suspend 
+ ""    Nop
+ "Restart%mini.turn.xpm%"     Exec exec gksudo reboot
+ ""    Nop
+ "Shutdown%mini.cross.xpm%"   Exec exec gksudo shutdown -h now


DestroyMenu XUtilities
AddToMenu XUtilities "X Utilities" Title
+ "xterm%mini.xterm.xpm%"     Exec  exec /usr/bin/xterm &
+ "xcalc%mini.calc.xpm%"      Exec  exec xcalc &
+ "xfontsel%mini.font.xpm%"   Exec  exec xfontsel &
+ "Manual%mini.xman.xpm%"     Exec  exec xman -notopbox -fn 9x15 &

DestroyMenu Internet
AddToMenu Internet "Internet" Title
+ "Chrome"                    Exec  exec /usr/bin/chromium-browser &
+ "Firefox"                   Exec  exec /usr/bin/firefox &

DestroyMenu Development
AddToMenu Development "Development" Title
+ "urxvt%mini.term.xpm%"         Exec  exec /usr/bin/urxvt &
+ "xterm%mini.xterm.xpm%"        Exec  exec /usr/bin/xterm &
+ "aterm%mini.term2.xpm%"        Exec  exec /usr/bin/aterm &
+ ""    Nop
+ "GVim%mini.gvim.png%"          Exec  exec /usr/bin/gvim &
+ "Eclipse"                      Exec  exec /usr/bin/eclipse &
+ ""    Nop
+ "VirtualBox%mini.desktop.xpm%" Exec  exec /usr/bin/virtualbox &

DestroyMenu Productivity
AddToMenu Productivity "Productivity" Title
+ "HipChat4"   Exec  exec /usr/local/bin/hipchat4 &
+ "Zoom"       Exec  exec /usr/bin/zoom &
+ "Slack"      Exec  exec /usr/bin/slack &

DestroyMenu Graphics
AddToMenu Graphics "Graphics" Title
+ "Gimp%mini.gimp.xpm%"       Exec  exec /usr/bin/gimp &
+ "XPaint%mini.xpaint.xpm%"   Exec  exec /usr/bin/xpaint &
+ "Darktable"                 Exec  exec /usr/bin/darktable &

DestroyMenu Window-Ops
AddToMenu Window-Ops  "This Window"  Title
+ "Move"     Move
+ "Resize"   Resize
+ "Iconify"  Iconify
+ "Stick"    Stick
+ ""    Nop
+ "Delete"   Delete
+ "Close"    Close
+ "Destroy"  Destroy

####################
# Window Functions
####################
AddToFunc Move-or-Raise    "I" Raise
+        "M" Move
+        "D" Lower

AddToFunc Move-or-Raise2   "M" Raise
+        "M" Move
+        "D" Lower

AddToFunc Maximize-Func    "M" Maximize   0 100
+        "C" Maximize   0 80
+        "D" Maximize   100 100

AddToFunc Move-or-Iconify  "I" Raise
+        "M" Move
+        "C" Iconify

AddToFunc Resize-or-Raise  "I" Raise
+        "M" Resize
+        "D" Lower

AddToFunc Resize-or-Raise2 "M" Raise
+        "M" Resize
+        "D" Lower

AddToFunc PrintFunction    "I" Raise
+        "I" Exec xdpr -id $w

AddToFunc Iconify-and-Raise     "I" Iconify
+                               "I" Raise

#############
# Buttons!
#############
*FvwmButtonsBack $[fvwm_back]
*FvwmButtonsFore black
*FvwmButtonsFont 6x10
*FvwmButtonsGeometry 420x60-0+0
*FvwmButtonsRows 1
*FvwmButtonsBoxSize dumb
*FvwmButtonsFrame 1
*FvwmButtons(Icon programs.xpm, Action 'Menu ApplicationMenu')
*FvwmButtons: (Container(rows 2, columns 2, Frame1))
  *FvwmButtons(1x1 Icon mini.filemgr.xpm, Action 'Exec "rox-filer" rox-filer &')
  *FvwmButtons(1x1 Icon mini.camera.xpm, Action 'Exec "screengrab" screengrab &')
  *FvwmButtons(1x1 Icon mini.term.xpm, Action 'Exec urxvt &')
  *FvwmButtons(1x1 Icon mini.rainbow.xpm, Action 'Exec unity-control-center &')
*FvwmButtons: (End)
*FvwmButtons(Swallow XLoad 'Exec xload -bg $[fvwm_back] -fg black -fn 6x10 &')
*FvwmButtons(Swallow XClock 'Exec xclock -bg $[fvwm_back] -update 1 &')
*FvwmButtons(Swallow(Hints,NoTitle) dclock `Exec exec  dclock  -date "%m/%d %a" -thickness 0.5 -noblink -led_off rgb:80/70/80 -slope 90 -nomiltime -bg $[fvwm_back] -fg 'black' -fn 6x10`)
*FvwmButtons(2x1 Swallow(NoTitle) "FvwmPager" "Module FvwmPager 0 0")

##############
# Window list
##############
*FvwmWinListAction Click1 Iconify -1,Focus
*FvwmWinListAction Click2 Iconify
*FvwmWinListAction Click3 Module "FvwmIdent" FvwmIdent
*FvwmWinListUseSkipList
*FvwmWinListGeometry +0-1

########
# Misc
########
*FvwmIconBox            "Fvwm*"         -
Key Escape  A  C  WindowList
Key F1 A N Exec exec /usr/local/bin/xlock -mode dclock -mono -nice 10
